#!/bin/bash

# –°–∫—Ä–∏–ø—Ç 2: –ü–æ—à—É–∫ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—É
if [ -z "$1" ]; then
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞: –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç."
    echo "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: $0 <—à–ª—è—Ö/–¥–æ/–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó>"
    exit 1
fi

TARGET_DIR="$1"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è —ñ—Å–Ω—É—î
if [ ! -d "$TARGET_DIR" ]; then
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞: –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è '$TARGET_DIR' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞."
    exit 1
fi

echo "üîç –ü–æ—à—É–∫ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó: $TARGET_DIR"

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è find –¥–ª—è –ø–æ—à—É–∫—É:
# -maxdepth 1: —Ç—ñ–ª—å–∫–∏ –≤ –ø–æ—Ç–æ—á–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –±–µ–∑ –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π
# -name '.*': —Ñ–∞–π–ª–∏, —ñ–º–µ–Ω–∞ —è–∫–∏—Ö –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ '.'
# ! -name '..': –≤–∏–∫–ª—é—á–∏—Ç–∏ '..' (–ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é)
# ! -type d: –≤–∏–∫–ª—é—á–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, —à—É–∫–∞—î–º–æ –ª–∏—à–µ —Ñ–∞–π–ª–∏
HIDDEN_FILES=$(find "$TARGET_DIR" -maxdepth 1 -name '.*' ! -name '..' -type f)

COUNT=0
if [ -n "$HIDDEN_FILES" ]; then
    # –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ä—è–¥–∫—ñ–≤ (—Ç–æ–±—Ç–æ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤)
    COUNT=$(echo "$HIDDEN_FILES" | wc -l)
fi

echo
echo "--- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É ---"
echo "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤: **$COUNT**"

if [ "$COUNT" -gt 0 ]; then
    echo "–°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:"
    echo "$HIDDEN_FILES"
fi

exit 0
